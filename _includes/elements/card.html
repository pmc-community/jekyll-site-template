{% capture uuid %}
  {% UUID %}
{% endcapture %}
{% assign cid = uuid | strip %}

{% assign img = include.img || default: "" %}
{% if img == "" %}
    {% assign imgFullPath = "" %}
{% else %}
    {% capture fullPath %}
        {% ImgFullPath {{img}} %}
    {% endcapture %}
    {% assign imgFullPath = fullPath %}
{% endif %}

{% assign file = include.file || default: "" %}
{% assign title = include.title || default: "" %}

{% if file !="" %}

{% assign cardWidth = site.data["buildConfig"]["elements"]["card"]["cardWidth"] %}
<div id="card-{{cid}}" style="width: {{cardWidth}}" class="bg-transparent card border border-secondary border-opacity-25 rounded my-4">
    
 {% if imgFullPath != "" %}
  <img id="card-img-{{cid}}" src="{{imgFullPath}}" class="pt-2 card-img-top img-fluid">
 {% endif %}

 <div id="card-body-{{cid}}" class="card-body">
   
   {% if title != "" %}
    <span class="fw-medium card-title text-primary" id="card-title-{{cid}}">{{title}}</span>
   {% endif %}

   <div id="card-text-{{cid}}" class="card-text">
    <div class="text-secondary">
            
     {% capture content %}
      {% 
        ExternalSiteContent  {
         "markdown": true,
         "file_path":"{{file}}", 
         "ignore_wp_shortcodes": true, 
         "start_marker": "fullFile", 
         "include_start_marker": false,
         "end_marker": "fullFile",
         "include_end_marker": false,
         "needAuth": false 
        }
      %}
     {% endcapture %}

     {% capture rendered_content %}
      {% DryRenderPage content %}
     {% endcapture %}

     {{rendered_content | markdonify}}

    </div>
   </div>
   
   <div id="card-buttons-{{cid}}" class="border-top border-secondary border-opacity-25 pt-2 mt-1">
    {% capture buttons %}
     type=link|outline=true|border=true|text=Intro|href="/intro/"|newTab=true,
     type=link"|border=false|text=PMC|href="https://pmc-expert.com"|newTab=true
    {% endcapture %}

    {% include elements/link-btn-group.html buttons=buttons %}
   </div>

  </div>

</div>

<style>
 {% assign cardImgHeight = site.data["buildConfig"]["elements"]["card"]["cardImgHeight"] %}
 #card-img-{{cid}} {
  margin-top: -3px;
  border-top-left-radius: 10px !important;
  border-top-right-radius: 10px !important;
  max-height: {{cardImgHeight}} !important;
  width:100% !important;
  object-fit: cover;
  object-position: top;
 }

 {% assign cardImgText = site.data["buildConfig"]["elements"]["card"]["cardImgText"] %}
 #card-text-{{cid}} {
  font-size: 0.875rem;
 }

</style>

{%else%}
 {% assign mess="Something went wrong when creating card. Source file is missing!" %}
 {% include elements/alert.html class="danger" content=mess title="Error" %}
{% endif %}